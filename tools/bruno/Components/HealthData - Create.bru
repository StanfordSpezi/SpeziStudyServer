docs {
  This source file is part of the SpeziStudyServer open source project

  SPDX-FileCopyrightText: 2026 Stanford University and the project authors (see CONTRIBUTORS.md)

  SPDX-License-Identifier: MIT
}

meta {
  name: HealthData - Create
  type: http
  seq: 9
}

post {
  url: {{baseUrl}}/studies/{{studyId}}/components/health-data
  body: json
  auth: inherit
}

headers {
  Content-Type: application/json
}

body:json {
  {
    "name": "Heart Rate Collection",
    "data": {
      "sampleTypes": ["HKQuantityTypeIdentifierHeartRate", "HKQuantityTypeIdentifierStepCount"],
      "historicalDataCollection": {
        "enabled": true,
        "startDate": {
          "type": "last",
          "components": {
            "day": 30
          }
        }
      }
    }
  }
}

script:post-response {
  const body = res.getBody();
  bru.setVar("componentId", body.id);
  console.log("Component created with id: " + body.id);
}
